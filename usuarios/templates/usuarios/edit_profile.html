<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Edit Profile</title>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    <!-- CSS Header -->
    <link rel="stylesheet" href="../css/header.css">

    <link
        href="https://fonts.googleapis.com/css2?family=Exo+2:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Gantari:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">

    <style>
        :root {
            --bg: #191919;
            --card: #2d2d2d;
            --panel: #373737;
            --input: #1f1f1f;
            --muted: #bdbdbd;
            --accent: #eadbff;
            --accent-dark: #7b3eb5;
            --white: #fafafa;
        }

        * {
            box-sizing: border-box
        }

        html,
        body {
            height: 100%
        }

        body {
            margin: 0;
            font-family: 'Gantari';
            background: var(--bg);
            color: var(--white);
            -webkit-font-smoothing: antialiased;
        }

        /* Card */
        .card-wrap {
            padding: 28px 48px
        }

        .card {
            background: var(--card);
            padding: 36px;
            border-radius: 8px;
            max-width: 1300px;
            margin: 0 auto;
            box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.01) inset;
            padding: 40px 60px;
        }

        .content {
            display: flex;
            gap: 48px;
            align-items: flex-start
        }

        /* Left column */
        .left-col {
            width: 320px;
            display: flex;
            flex-direction: column;
            gap: 24px
        }

        .title {
            font-family: 'Exo 2';
            font-weight: 800;
            font-size: 40px;
            letter-spacing: 1px;
            color: var(--white);
            text-transform: uppercase;
        }

        .avatar-wrap {
            width: 160px;
            height: 160px;
            border-radius: 999px;
            background: var(--accent);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            cursor: pointer;
            border: 6px solid rgba(123, 62, 181, 0.08)
        }

        .avatar-icon {
            width: 92px;
            height: 92px;
            border-radius: 50%;
            background: transparent;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent-dark);
            font-weight: 700;
            font-size: 40px
        }

        .avatar-input {
            display: none
        }

        /* Right column */
        .right-col {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 18p;
            padding-top: 10px;
        }

        .favorites {
            display: flex;
            justify-content: space-between;
            gap: 18px;
            width: 100%;
            margin-bottom: 20px;
        }

        .fav-slot {
            width: 150px;
            height: 200px;
            background: #2a2a2a;
            border: 1px solid rgba(255, 255, 255, 0.08);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            padding: 0;
            flex: 0 0 auto;

        }

        .fav-slot i {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--muted);
            z-index: 2;
            pointer-events: none;
        }

        .fav-slot img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: none;
            z-index: 1;
        }

        .fav-slot.has-image i {
            display: none;
        }

        .fav-label {
            font-size: 20px;
            font-weight: 700;
            font-family: 'Gantari';
            color: white;
            margin-bottom: 8px;
            letter-spacing: 2px;
        }

        /* Form row labels / fields */
        .form-row {
            display: flex;
            gap: 22px;
            align-items: flex-start;
        }

        .labels {
            font-size: 20px;
            font-weight: 700;
            font-family: 'Gantari';
            color: white;
            margin-bottom: 8px;
            letter-spacing: 2px;
            width: 160px;
            display: flex;
            flex-direction: column;
            gap: 40px;
        }

        .labels div {
            font-weight: 700;
            font-size: 14px;
            color: var(--white);
            text-transform: uppercase
        }

        .fields {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 10px
        }

        .fields input[type=text],
        .fields textarea {
            width: 100%;
            padding: 12px 14px;
            border-radius: 6px;
            border: 1px solid rgba(255, 255, 255, 0.04);
            background: var(--input);
            color: var(--muted);
            font-size: 14px;
            resize: vertical;
            min-height: 40px;
            font-family: 'Gantari';
        }

        .actions {
            display: flex;
            justify-content: flex-end;
            margin-top: 18px
        }

        .save-btn {
            background: #6E32D5;
            color: var(--white);
            width: 250px;
            height: 50px;
            padding: 12px 18px;
            border-radius: 8px;
            border: 0;
            font-family: 'Exo 2';
            font-weight: 600;
            font-size: 20px;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            text-align: center;
            justify-content: center;
            transition: transform 0.6s ease, background 0.3s ease, box-shadow 0.3s ease;
        }

        .save-btn:hover {
            background: linear-gradient(100deg, #6E32D5 0%, #6C00FA 100%);
            color: var(--white);
            box-shadow: 0 4px 15px rgba(124, 58, 237, 0.4);
            transform: translateY(-2px) scale(1.05);
        }

        @media (max-width:980px) {
            .content {
                flex-direction: column;
                align-items: center
            }

            .left-col {
                width: 100%;
                align-items: center
            }

            .labels {
                width: 140px
            }
        }
    </style>
</head>

<body>

    <header class="site-header">
        <div class="logo-container">
            <a href="../home.html">
                <img src="../img/logo_filmbox.png" alt="Logo" class="logo-img">
            </a>
        </div>

        <div class="right-section">
            <div class="search-container">
                <input type="text" id="search-input" placeholder="Search" style="font-family: Arial;">
                <button id="search-button">
                    <i class="bi bi-search"></i>
                </button>
            </div>
            <div class="profile-container">
                <a href="perfil_user.html">
                    <img src="../img/foto-perfil-usuario.jpg" alt="Perfil" class="profile-img">
                </a>
            </div>
        </div>
    </header>

    <div class="card-wrap">
        <div class="card">
            <div class="content">
                <!-- Left: title + avatar -->
                <div class="left-col">
                    <div class="title">EDIT PROFILE</div>

                    <label class="avatar-wrap" id="avatarWrap" title="Cambiar avatar">
                        <div class="avatar-placeholder" id="avatarPlaceholder">游녻</div>
                        <img id="avatarImg" alt="Avatar" style="display:none">
                        <input type="file" id="avatarInput" accept="image/*" style="display:none">
                    </label>

                </div>

                <!-- Right: favorites + form -->
                <div class="right-col">
                    <div>
                        <div class="fav-label">FAVORITES</div>
                        <div class="favorites" id="favorites">

                            <div class="fav-slot" data-index="0" title="A침adir favorito 1">
                                <i class="bi bi-plus" style="font-size: 2.5rem;"></i>
                                <img style="display:none" alt="Fav 1">
                                <input type="file" accept="image/*" style="display:none">
                            </div>
                            <div class="fav-slot" data-index="1" title="A침adir favorito 2">
                                <i class="bi bi-plus" style="font-size: 2.5rem;"></i>
                                <img style="display:none" alt="Fav 2">
                                <input type="file" accept="image/*" style="display:none">
                            </div>
                            <div class="fav-slot" data-index="2" title="A침adir favorito 3">
                                <i class="bi bi-plus" style="font-size: 2.5rem;"></i>
                                <img style="display:none" alt="Fav 3">
                                <input type="file" accept="image/*" style="display:none">
                            </div>
                            <div class="fav-slot" data-index="3" title="A침adir favorito 4">
                                <i class="bi bi-plus" style="font-size: 2.5rem;"></i>
                                <img style="display:none" alt="Fav 4">
                                <input type="file" accept="image/*" style="display:none">
                            </div>
                        </div>
                    </div>

                    <form id="profileForm">
                        <div class="form-row" style="margin-top:8px">
                            <div class="labels">
                                <div>NAME</div>
                                <div>DESCRIPTION</div>
                            </div>

                            <div class="fields">
                                <input type="text" id="name" name="name" placeholder="Edit Name" required>
                                <textarea id="description" name="description" placeholder="Edit Description"></textarea>
                            </div>
                        </div>

                        <div class="actions">
                            <button type="submit" class="save-btn">
                                <i class="bi bi-save" style="font-size: 1 rem;"></i>
                                SAVE CHANGES
                            </button>
                        </div>
                    </form>
                </div>

            </div>
        </div>
    </div>

    <script>
        // Favorites handling
        const favContainer = document.getElementById('favorites');
        const favSlots = Array.from(favContainer.querySelectorAll('.fav-slot'));

        favSlots.forEach(slot => {
            const input = slot.querySelector('input[type=file]');
            const img = slot.querySelector('img');

            slot.addEventListener('click', () => input.click());
            input.addEventListener('change', (e) => {
                const f = e.target.files && e.target.files[0];
                if (!f) return clearFav(slot);
                if (!f.type.startsWith('image/')) { alert('Por favor selecciona una imagen.'); input.value = ''; return }
                const url = URL.createObjectURL(f);
                img.src = url; img.style.display = 'block';
                slot.classList.add('has-image');
            });
        });

        function clearFav(slot) {
            const img = slot.querySelector('img');
            const input = slot.querySelector('input[type=file]');
            img.src = ''; img.style.display = 'none'; input.value = '';
            slot.classList.remove('has-image');
        }

        // Form submit - demo
        const form = document.getElementById('profileForm');
        form.addEventListener('submit', (ev) => {
            ev.preventDefault();
            const data = new FormData();
            data.append('name', document.getElementById('name').value.trim());
            data.append('description', document.getElementById('description').value.trim());

            const avatarInput = document.getElementById('avatarInput');
            if (avatarInput.files && avatarInput.files[0]) data.append('avatar', avatarInput.files[0]);
            favSlots.forEach((slot, i) => { const inp = slot.querySelector('input[type=file]'); if (inp.files && inp.files[0]) data.append('favorite_' + i, inp.files[0]) });

            console.log('Profile form ready to send:');
            for (const p of data.entries()) console.log(p[0], p[1]);
            alert('Cambios preparados (ver consola).');
        });
    </script>
</body>

</html>