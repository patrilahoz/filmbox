{% extends "base/base.html" %}
{% load static %}

{% block title %}Película{% endblock %}

{% block extra_css %}

<style>
    :root {
        --bg: #191919;
        --panel: #262626;
        --accent: #e9dff0;
        --muted: #bdbdbd;
        --accent: #6E32D5;
    }

    body {
        background: var(--bg);
        color: #fff;
        font-family: 'Gantari';
    }

    .poster {
        width: 100%;
        height: auto;
        display: block;
        border-radius: 6px;
    }

    .page-title {
        font-family: 'Exo 2', sans-serif;
        font-weight: 800;
        font-size: 50px;
        line-height: 1.1;
        margin-bottom: 0;
    }

    .muted {
        color: var(--muted);
    }

    .card-surface {
        background: transparent;
        border: 1px solid rgba(255, 255, 255, 0.08);
        padding: 1.25rem;
    }

    .rating-row {
        display: flex;
        align-items: center;
        gap: 1rem;
    }

    .stars {
        display: flex;
        gap: .5rem;
    }

    .star {
        font-size: 2.5rem;
        color: transparent;
        -webkit-text-stroke: 1px rgba(255, 255, 255, 0.45);
        cursor: pointer;
        transition: color .12s, -webkit-text-stroke-color .12s;
    }

    .star.filled {
        color: #6E32D5;
        -webkit-text-stroke-color: #6E32D5;
    }

    .save-btn {
        background: #6E32D5;
        width: 300px;
        border: none;
        font-family: 'Exo 2';
        font-weight: 500;
        font-size: 20px;
        color: white;
        padding: .55rem 1.25rem;
        border-radius: .5rem;
        gap: 10px;
        cursor: pointer;
        text-align: center;
        transition: transform 0.6s ease, background 0.3s ease, box-shadow 0.3s ease;
    }

    .save-btn:hover {
        background: linear-gradient(100deg, #6E32D5 0%, #6C00FA 100%);
        color: var(--white);
        box-shadow: 0 4px 15px rgba(124, 58, 237, 0.4);
        transform: translateY(-2px) scale(1.05);
    }

    .search-input {
        background: #efe7f6;
        border-radius: 30px;
        padding: .25rem .75rem;
    }

    .user.shadow-sm {
        width: 40px;
        height: 40px;
        background: #d7c7ff;
        border-radius: 50%;
        display: inline-block;
    }

    .star::before {
        content: '\2605';
    }

    .meta-row .col {
        padding-right: 0.5rem;
    }

    /* Responsividad */
    @media (max-width:767px) {
        .page-title {
            font-size: 2rem;
        }

        .star {
            font-size: 1.5rem;
        }
    }
</style>

{% endblock %}

{% block content %}

<main class="container my-5">
    <div class="row gy-4">
        <!-- Left: poster -->
        <div class="col-12 col-md-4">
            <!-- Imagen Poster -->
            <img src="{% static 'peliculas/img/corpse-bride.jpg' %}" alt="Poster de la película"
                class="poster shadow-sm">
        </div>

        <!-- Right: details -->
        <div class="col-12 col-md-8 text-start">
            <h1 class="page-title display-6">TÍTULO</h1>

            <div class="row meta-row mt-3 mb-3">
                <div class="col-4 col-md-3"><strong>Director</strong></div>
                <div class="col-4 col-md-2"><strong>Year</strong></div>
                <div class="col-4 col-md-3"><strong>Genres</strong></div>
            </div>

            <p class="muted">Sinopsis</p>

            <!-- Rating & review box -->
            <div class="card-surface mt-4">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <div class="stars" id="starsContainer">
                        <span class="star" data-value="1" aria-hidden="true"></span>
                        <span class="star" data-value="2" aria-hidden="true"></span>
                        <span class="star" data-value="3" aria-hidden="true"></span>
                        <span class="star" data-value="4" aria-hidden="true"></span>
                        <span class="star" data-value="5" aria-hidden="true"></span>
                    </div>
                    <button class="save-btn">
                        <i class="bi bi-save" style="font-size: 1.25rem; margin-right: 8px;"></i>
                        SAVE
                    </button>
                </div>

                <label class="form-label small text-uppercase muted">Write a review</label>
                <textarea class="form-control bg-transparent text-white" rows="4"
                    placeholder="Write a review..."></textarea>
            </div>
        </div>
    </div>
</main>

<script>
    // Star hover & click: pintar las estrellas del mismo color que el botón Save al pasar el ratón
    (function () {
        const stars = Array.from(document.querySelectorAll('.star'));
        let selected = 0;

        function fill(upto) {
            stars.forEach((s, i) => {
                if (i < upto) s.classList.add('filled'); else s.classList.remove('filled');
            });
        }

        stars.forEach((s, idx) => {
            s.addEventListener('mouseover', () => fill(idx + 1));
            s.addEventListener('focus', () => fill(idx + 1));
            s.addEventListener('click', () => { selected = idx + 1; fill(selected); });
        });

        // Restaurar las estrellas cuando el ratón sale del contenedor de estrellas
        const container = document.getElementById('starsContainer');
        container.addEventListener('mouseleave', () => fill(selected));
        container.addEventListener('blur', () => fill(selected));
    })();
</script>
{% endblock %}